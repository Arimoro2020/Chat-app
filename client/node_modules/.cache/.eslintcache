[{"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/index.js":"1","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/App.js":"2","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/UserContext.js":"3","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/ChatRoom.js":"4","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/ChatList.js":"5","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Home.js":"6","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/UserProfile.js":"7","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Navigation.js":"8","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Login.js":"9","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Contacts.js":"10","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Signup.js":"11","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/useLocalStorage.js":"12","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Clock.js":"13","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Search.js":"14","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/DarkMode.js":"15"},{"size":442,"mtime":1694031493255,"results":"16","hashOfConfig":"17"},{"size":8047,"mtime":1694031493253,"results":"18","hashOfConfig":"17"},{"size":1466,"mtime":1694031493254,"results":"19","hashOfConfig":"17"},{"size":3152,"mtime":1694031493253,"results":"20","hashOfConfig":"17"},{"size":1631,"mtime":1695082135113,"results":"21","hashOfConfig":"17"},{"size":1602,"mtime":1695082124377,"results":"22","hashOfConfig":"17"},{"size":4784,"mtime":1695082166762,"results":"23","hashOfConfig":"17"},{"size":2640,"mtime":1695082205046,"results":"24","hashOfConfig":"17"},{"size":2351,"mtime":1694031493254,"results":"25","hashOfConfig":"17"},{"size":1732,"mtime":1695082185947,"results":"26","hashOfConfig":"17"},{"size":4191,"mtime":1694031493254,"results":"27","hashOfConfig":"17"},{"size":563,"mtime":1694031493254,"results":"28","hashOfConfig":"17"},{"size":525,"mtime":1694031493253,"results":"29","hashOfConfig":"17"},{"size":548,"mtime":1694031493254,"results":"30","hashOfConfig":"17"},{"size":716,"mtime":1694031493254,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","suppressedMessages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},"1xb4c5l",{"filePath":"36","messages":"37","suppressedMessages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"35"},{"filePath":"40","messages":"41","suppressedMessages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"35"},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"47","messages":"48","suppressedMessages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","suppressedMessages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"62","messages":"63","suppressedMessages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"65","messages":"66","suppressedMessages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"68","messages":"69","suppressedMessages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"71","messages":"72","suppressedMessages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"74","messages":"75","suppressedMessages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"77","messages":"78","suppressedMessages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/index.js",[],[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/App.js",["80","81","82"],[],"import React, { useContext } from 'react';\nimport UserContext from \"./Components/UserContext\";\nimport { Routes, Route } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport Home from \"./Components/Home\";\nimport ChatList from \"./Components/ChatList\";\nimport ChatRoom from \"./Components/ChatRoom\";\nimport Contacts from \"./Components/Contacts\";\nimport Navigation from \"./Components/Navigation\";\nimport UserProfile from \"./Components/UserProfile\";\n\n\nimport Login from \"./Components/Login\";\nimport Signup from \"./Components/Signup\";\n\n\nimport { useNavigate } from \"react-router-dom\";\n\n\n\t\n\n\n\nfunction App() {\n\tconst [allMessages, setAllMessages] = useState([]);\n\tconst [conversations, setConversations] = useState([]);\n\tconst [userConversations, setUserConversations] = useState([]);\n\tconst [messages, setMessages] = useState([]);\n\tconst [filteredConversationsId, setFilteredConversationsId] = useState([]);\n\tconst [received, setReceived] = useState([]);\n\tconst [id, setId] = useState(null);\n\tconst [isEditing, setIsEditing] = useState(false)\n\tconst [newId, setNewId] = useState(null)\n\tconst [conversationData, setConversationData] = useState(null);\n\n\tconst {currentUser} = useContext(UserContext);\n\tconst formOutline = {\"content_type\":\"String\", \"content_data\": \"\",\"conversation_id\": id, \"user_id\": parseInt(currentUser.id)\n\t\t}\n\t const inviteForm = \t\n\t conversationData && {\"content_type\":\"String\", \n\t\t\"content_data\": \"Hi, Let's start chatting!\",\n\t\t\"conversation_id\": parseInt(conversationData.id), \n\t\t\"user_id\": parseInt(currentUser.id)\n\t}\n\tconst [formBody, setFormBody] = useState(formOutline)\n\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\n\t\tfetch(`/user_conversations`)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) =>{\n\t\t\t\tif(userConversations !== data){setUserConversations(data)}});\n\t},[]);\n\n\n\tuseEffect(() =>{\n\n\t\tfetch(`/conversations`)\n\t\t.then((res) => res.json())\n\t\t.then((data) =>{\n\t\t\tif(conversations !== data){setConversations(data)}});\n\t\n\t},[]);\n\n\n\tuseEffect(() =>{\n\t\tfetch(`/messages`)\n\t\t.then((res) => res.json())\n\t\t.then((data) =>{\n\t\t\tif(allMessages !== data){setAllMessages(data)}});\n\t\tgetList();\n\t},[allMessages]);\n\n\n\n\tconst getList = () => {\t\n\t\tconst  getMessages = [...allMessages].filter((message) => {\n\t\t\treturn (parseInt(message.user_id) === currentUser.id)})\n\n\t\t\tif(messages !== getMessages){\n\t\t\t\tsetMessages((messages)=> getMessages);\n\n\t\t\t}\n\t\t\t\n\t\t\tconst filteredConversationsById = [...messages].map((another)=>parseInt(another.conversation.id));\n\t\t\tif(filteredConversationsId !== filteredConversationsById){setFilteredConversationsId((filteredConversationsId)=>filteredConversationsById)}\n\n\t\t\tconst incomingMessages = [...allMessages].filter(incoming=>{\n\t\t\treturn (((filteredConversationsId.includes(parseInt(incoming.conversation_id)) && (parseInt(incoming.user_id) !== currentUser.id)))\n\t\t\t || ((incoming.conversation_name === currentUser.name) && (parseInt(incoming.user_id) !== currentUser.id)))});\n\t\t\n\t\t\tif(received !== incomingMessages){\n\t\t\t\tsetReceived((received)=>incomingMessages)};\n\t}\n\n\n\tfunction handleNewMessageOnClick(fresh){\n\t\t\n\t\tsetId((id)=>fresh.conversation_id);\n\t\tnavigate(\"/chat_room\")\n\t\t\t\n\t\t}\n\n\n\t// function handleMessageOnClick (fresh){\n\t// \tsetId(fresh.conversation_id);\n\t// \tnavigate(\"/chat_room\")\n\n\t// }\n\n\n\tfunction handleOnClickButton(chat){\n\t\tsetIsEditing(isEditing=>!isEditing);\n\t\tif(parseInt(newId) !== parseInt(chat.id)){setNewId((newId)=>parseInt(chat.id));\n\t\t// console.log(newId)};\n\t}\n\t}\n\n\tfunction handleOnChange(e){\n\t\t\n\t\t\tsetFormBody({...formBody, [e.target.name]: e.target.value});\n\t}\n\n\tfunction handleFormSubmit(e) {\n\t\te.preventDefault();\n\t\t\tisEditing ? \n\t\t\t\t\n\t\t\t\tfetch(`http://localhost:5555/messages/${parseInt(newId)}`, {\n\t\t\t\t\tmethod: \"PATCH\",\n\t\t\t\t\tcrossDomain: true,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\t\"Access-control-Allow-Origin\":\"*\",\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify( {...formBody, \"id\":newId}),\n\t\t\t\t})\n\t\t\t\t\t.then((r) => r.json())\n\t\t\t\t\t.then(() =>{\n\t\t\t\t\t\tif(formBody.content_data !== \"\"){setFormBody(formOutline)};\n\t\t\t\t\t\tsetIsEditing(isEditing=>!isEditing)\n\t\t\t\t\t\tsetNewId(null);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(console.error)\n\t\t\n\t\t\t\n\t\t\t:\n\t\t\t\tfetch(\"http://localhost:5555/messages\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tcrossDomain: true,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\t\"Access-control-Allow-Origin\":\"*\",\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(formBody),\n\t\t\t\t})\n\t\t\t\t\t.then((r) => r.json())\n\t\t\t\t\t.then((update) =>{ \n\n\t\t\t\t\t\t\t// console.log(update);\n\t\t\t\t\t\t\tif(formBody.content_data !== \"\"){setFormBody(formOutline)};\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t})\t\n\t\t\t\t.catch(console.error)\n\t}\n\t\t\n\n\t\tfunction handleOnDelete(chat){\n\t\t\tfetch(`http://localhost:5555/messages/${parseInt(chat.id)}`, {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\tcrossDomain: true,\n\t\t\t\theaders: {\n\t\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\"Access-control-Allow-Origin\":\"*\",},\n\t\t\t});\n\n\t\t\tconst removedDeleted = [...messages].filter((message) => parseInt(message.id) !== parseInt(chat.id));\n\t\t\tif(messages !== removedDeleted){\n\t\t\t\tsetMessages((messages)=>removedDeleted)}; \n\t\t}\n\n\t\tfunction handleOnClick(contact){\n\t\t\t\n\t\t\tfetch(`http://localhost:5555/conversations`, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tcrossDomain: true,\n\t\t\t\theaders: {\n\t\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\"Access-control-Allow-Origin\":\"*\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\"conversation_name\": contact.name})\n\n\t\t\t})\n\t\t\t\t.then((r) => r.json())\n\t\t\t\t.then((data) =>{ \n\t\t\t\t\t\t\tif(data !== conversationData){setConversationData(data)}\n\t\t\t\t\t\t\tconst newData = [...conversations, [data]];\n\t\t\t\t\t\t\tif(conversations !== newData){setConversations(newData)}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\n\n\t\t\tfetch(`http://localhost:5555/user_conversations`, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tcrossDomain: true,\n\t\t\t\theaders: {\n\t\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\"Access-control-Allow-Origin\":\"*\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\"conversation_id\": parseInt(conversationData.id),\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\"user_id\": parseInt(contact.id)})\n\t\n\t\t\t})\n\t\t\t\t.then((r) => r.json())\n\t\t\t\t.then((another) =>{\n\t\t\t\t\tconst newUserData = [...userConversations, another];\n\t\t\t\t\tif(userConversations !== newUserData){setUserConversations(newUserData)}})\n\n\t\t\tfetch(`http://localhost:5555/messages`, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tcrossDomain: true,\n\t\t\t\theaders: {\n\t\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\"Access-control-Allow-Origin\":\"*\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify(inviteForm),\n\t\t\t})\n\t\t\t\t.then((r) => r.json())\n\t\t\t\t.then((update) =>{ \n\t\t\t\t\tconst updatedMessages = [...allMessages, [update]];\n\t\t\t\t\tif(allMessages !== updatedMessages){setAllMessages(updatedMessages)};\t\n\t\t\t\t\t\t\t\n\t\t\t})\t\n\t\t\t.catch(console.error)\n\t\n\t}\n\t\n\n\n\t\n\t\n\n\t\n\t// console.log(messages)\n\t// console.log(allMessages)\n\t// console.log(received)\n\t// console.log(conversationData)\n\t// console.log(id)\n\t// console.log(isEditing)\n\t// console.log(newId)\n\t\n    \n\tif (!currentUser){\n\t\treturn (\n\t\t\t<div className=\"Not Authorized\">\n\t\t\t\t<Navigation />\n\t\t\t\t<Login />\n\t\t\t</div>\n\t\t)\n\t}\n\t\n\t\n\n\treturn (\n\t\t\n\t\t<div className=\"Chat App\">\n\t\t\t<Navigation />\n\t\t\t<Routes>\n        \t\t<Route exact path=\"/home\" element={<Home received={received} handleNewMessageOnClick={handleNewMessageOnClick}/>}  />\n\t\t\t\t< Route exact path = \"/signup\" element={<Signup />} />\n\t\t\t\t< Route exact path = \"/\" element={<Login />} />\n\t\t\t\t< Route exact path = \"/contacts\" element={<Contacts handleOnClick={handleOnClick}/>} />\n\t\t\t\t< Route exact path = \"/chat_list\" element={<ChatList  messages={messages}  handleNewMessageOnClick={handleNewMessageOnClick}/>} />\n\t\t\t\t< Route exact path = \"/chat_room\" element={<ChatRoom   id={id} \n\t\t\t\t\thandleFormSubmit={handleFormSubmit} formBody={formBody} handleOnChange={handleOnChange}\n\t\t\t\t\thandleOnDelete={handleOnDelete} handleOnClickButton={handleOnClickButton} isEditing={isEditing}/>} />\n\t\t\t\t< Route exact path = \"/user_profile\" element={<UserProfile />} />\n\t\t\t</Routes>\n\t\t</div>\n\t\t\n\t);\n}\n\n\n\n\nexport default App;\n\n\n","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/UserContext.js",["83"],[],"import React from 'react';\nimport {useEffect, createContext} from \"react\";\nimport Login from './Login';\nimport { useLocalStorage} from './useLocalStorage';\n\n\n\nconst UserContext = createContext();\n\n\n\n\nexport const UserProvider  = ({children}) => {\n\n    const [initialValues, setInitialValues] = useLocalStorage(\"isLoggedIn\", {\n        'username': \"\",\n        'password': \"\"\n    });\n    \n\n    const [currentUser, setCurrentUser ] = useLocalStorage(\"user\", {\n        'id': \"\",\n        'username': \"\",\n        'password': \"\",\n        'name': \"\",\n        'avatar': \"\",\n        'background': \"\",\n        'status': \"\"\n  });\n\n    useEffect(() => {\n     \n\tif (!initialValues) return;\n\tif (initialValues.username === currentUser.username) return;\n\tfetch(`http://localhost:5555/users/`+initialValues.username, {\n        method: \"GET\",\n        crossDomain: true,\n        headers: {\n            \"content-type\": \"application/json\",\n            Accept: \"application/json\",\n            \"Access-control-Allow-Origin\":\"*\",\n        }\n    })\n\t\t\t.then(res=>res.json())\n\t\t\t.then(data =>setCurrentUser(data))\n            .catch(console.error);\n\n\t},[setCurrentUser, setInitialValues]);\n    \n    console.log(currentUser);\n    console.log(initialValues);\n    return (\n        <UserContext.Provider value={{currentUser, setCurrentUser, initialValues, setInitialValues}}>\n           {currentUser? children : <Login />}\n        </UserContext.Provider>\n\n    );\n    };\n\nexport default UserContext;","/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/ChatRoom.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/ChatList.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Home.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/UserProfile.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Navigation.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Login.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Contacts.js",["84"],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Signup.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/useLocalStorage.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Clock.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Search.js",[],[],"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/DarkMode.js",[],[],{"ruleId":"85","severity":1,"message":"86","line":55,"column":4,"nodeType":"87","endLine":55,"endColumn":6,"suggestions":"88"},{"ruleId":"85","severity":1,"message":"89","line":65,"column":4,"nodeType":"87","endLine":65,"endColumn":6,"suggestions":"90"},{"ruleId":"85","severity":1,"message":"91","line":74,"column":4,"nodeType":"87","endLine":74,"endColumn":17,"suggestions":"92"},{"ruleId":"85","severity":1,"message":"93","line":48,"column":4,"nodeType":"87","endLine":48,"endColumn":38,"suggestions":"94"},{"ruleId":"95","severity":1,"message":"96","line":24,"column":14,"nodeType":"97","messageId":"98","endLine":24,"endColumn":26},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'userConversations'. Either include it or remove the dependency array.","ArrayExpression",["99"],"React Hook useEffect has a missing dependency: 'conversations'. Either include it or remove the dependency array.",["100"],"React Hook useEffect has a missing dependency: 'getList'. Either include it or remove the dependency array.",["101"],"React Hook useEffect has missing dependencies: 'currentUser.username' and 'initialValues'. Either include them or remove the dependency array.",["102"],"no-unused-vars","'handleSearch' is defined but never used.","Identifier","unusedVar",{"desc":"103","fix":"104"},{"desc":"105","fix":"106"},{"desc":"107","fix":"108"},{"desc":"109","fix":"110"},"Update the dependencies array to be: [userConversations]",{"range":"111","text":"112"},"Update the dependencies array to be: [conversations]",{"range":"113","text":"114"},"Update the dependencies array to be: [allMessages, getList]",{"range":"115","text":"116"},"Update the dependencies array to be: [currentUser.username, initialValues, setCurrentUser, setInitialValues]",{"range":"117","text":"118"},[1818,1820],"[userConversations]",[1980,1982],"[conversations]",[2143,2156],"[allMessages, getList]",[1125,1159],"[currentUser.username, initialValues, setCurrentUser, setInitialValues]"]