{"ast":null,"code":"var _jsxFileName = \"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/UserContext.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useEffect, createContext } from \"react\";\nimport Login from './Login';\nimport { useLocalStorage } from './useLocalStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext();\nexport const UserProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [initialValues, setInitialValues] = useLocalStorage(\"isLoggedIn\", {\n    'username': \"\",\n    'password': \"\"\n  });\n  const [currentUser, setCurrentUser] = useLocalStorage(\"user\", {\n    'id': \"\",\n    'username': \"\",\n    'password': \"\",\n    'name': \"\",\n    'avatar': \"\",\n    'background': \"\",\n    'status': \"\"\n  });\n  useEffect(() => {\n    if (!initialValues) return;\n    if (initialValues.username === currentUser.username) return;\n    fetch(`http://localhost:5555/users/` + initialValues.username, {\n      method: \"GET\",\n      crossDomain: true,\n      headers: {\n        \"content-type\": \"application/json\",\n        Accept: \"application/json\",\n        \"Access-control-Allow-Origin\": \"*\"\n      }\n    }).then(res => res.json()).then(data => setCurrentUser(data)).catch(console.error);\n  }, [setCurrentUser, setInitialValues]);\n  console.log(currentUser);\n  console.log(initialValues);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      currentUser,\n      setCurrentUser,\n      initialValues,\n      setInitialValues\n    },\n    children: currentUser ? children : /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 37\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n_s(UserProvider, \"4iUMDd/VrwLVm3kMn0uXDyPbgec=\", false, function () {\n  return [useLocalStorage, useLocalStorage];\n});\n_c = UserProvider;\nexport default UserContext;\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["React","useEffect","createContext","Login","useLocalStorage","jsxDEV","_jsxDEV","UserContext","UserProvider","_ref","_s","children","initialValues","setInitialValues","currentUser","setCurrentUser","username","fetch","method","crossDomain","headers","Accept","then","res","json","data","catch","console","error","log","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/UserContext.js"],"sourcesContent":["import React from 'react';\nimport {useEffect, createContext} from \"react\";\nimport Login from './Login';\nimport { useLocalStorage} from './useLocalStorage';\n\n\n\nconst UserContext = createContext();\n\n\n\n\nexport const UserProvider  = ({children}) => {\n\n    const [initialValues, setInitialValues] = useLocalStorage(\"isLoggedIn\", {\n        'username': \"\",\n        'password': \"\"\n    });\n    \n\n    const [currentUser, setCurrentUser ] = useLocalStorage(\"user\", {\n        'id': \"\",\n        'username': \"\",\n        'password': \"\",\n        'name': \"\",\n        'avatar': \"\",\n        'background': \"\",\n        'status': \"\"\n  });\n\n    useEffect(() => {\n     \n\tif (!initialValues) return;\n\tif (initialValues.username === currentUser.username) return;\n\tfetch(`http://localhost:5555/users/`+initialValues.username, {\n        method: \"GET\",\n        crossDomain: true,\n        headers: {\n            \"content-type\": \"application/json\",\n            Accept: \"application/json\",\n            \"Access-control-Allow-Origin\":\"*\",\n        }\n    })\n\t\t\t.then(res=>res.json())\n\t\t\t.then(data =>setCurrentUser(data))\n            .catch(console.error);\n\n\t},[setCurrentUser, setInitialValues]);\n    \n    console.log(currentUser);\n    console.log(initialValues);\n    return (\n        <UserContext.Provider value={{currentUser, setCurrentUser, initialValues, setInitialValues}}>\n           {currentUser? children : <Login />}\n        </UserContext.Provider>\n\n    );\n    };\n\nexport default UserContext;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,SAAS,EAAEC,aAAa,QAAO,OAAO;AAC9C,OAAOC,KAAK,MAAM,SAAS;AAC3B,SAASC,eAAe,QAAO,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAInD,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC;AAKnC,OAAO,MAAMM,YAAY,GAAIC,IAAA,IAAgB;EAAAC,EAAA;EAAA,IAAf;IAACC;EAAQ,CAAC,GAAAF,IAAA;EAEpC,MAAM,CAACG,aAAa,EAAEC,gBAAgB,CAAC,GAAGT,eAAe,CAAC,YAAY,EAAE;IACpE,UAAU,EAAE,EAAE;IACd,UAAU,EAAE;EAChB,CAAC,CAAC;EAGF,MAAM,CAACU,WAAW,EAAEC,cAAc,CAAE,GAAGX,eAAe,CAAC,MAAM,EAAE;IAC3D,IAAI,EAAE,EAAE;IACR,UAAU,EAAE,EAAE;IACd,UAAU,EAAE,EAAE;IACd,MAAM,EAAE,EAAE;IACV,QAAQ,EAAE,EAAE;IACZ,YAAY,EAAE,EAAE;IAChB,QAAQ,EAAE;EAChB,CAAC,CAAC;EAEAH,SAAS,CAAC,MAAM;IAEnB,IAAI,CAACW,aAAa,EAAE;IACpB,IAAIA,aAAa,CAACI,QAAQ,KAAKF,WAAW,CAACE,QAAQ,EAAE;IACrDC,KAAK,CAAE,8BAA6B,GAACL,aAAa,CAACI,QAAQ,EAAE;MACtDE,MAAM,EAAE,KAAK;MACbC,WAAW,EAAE,IAAI;MACjBC,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClCC,MAAM,EAAE,kBAAkB;QAC1B,6BAA6B,EAAC;MAClC;IACJ,CAAC,CAAC,CACFC,IAAI,CAACC,GAAG,IAAEA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACrBF,IAAI,CAACG,IAAI,IAAGV,cAAc,CAACU,IAAI,CAAC,CAAC,CACxBC,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;EAEhC,CAAC,EAAC,CAACb,cAAc,EAAEF,gBAAgB,CAAC,CAAC;EAElCc,OAAO,CAACE,GAAG,CAACf,WAAW,CAAC;EACxBa,OAAO,CAACE,GAAG,CAACjB,aAAa,CAAC;EAC1B,oBACIN,OAAA,CAACC,WAAW,CAACuB,QAAQ;IAACC,KAAK,EAAE;MAACjB,WAAW;MAAEC,cAAc;MAAEH,aAAa;MAAEC;IAAgB,CAAE;IAAAF,QAAA,EACxFG,WAAW,GAAEH,QAAQ,gBAAGL,OAAA,CAACH,KAAK;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACf,CAAC;AAG3B,CAAC;AAACzB,EAAA,CA7COF,YAAY;EAAA,QAEqBJ,eAAe,EAMlBA,eAAe;AAAA;AAAAgC,EAAA,GAR7C5B,YAAY;AA+CzB,eAAeD,WAAW;AAAC,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}