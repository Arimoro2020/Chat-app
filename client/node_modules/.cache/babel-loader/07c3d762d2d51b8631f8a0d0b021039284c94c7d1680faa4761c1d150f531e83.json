{"ast":null,"code":"import _slicedToArray from\"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect,createContext}from\"react\";import Login from'./Login';import{useLocalStorage}from'./useLocalStorage';import{jsx as _jsx}from\"react/jsx-runtime\";var UserContext=/*#__PURE__*/createContext();export var UserProvider=function UserProvider(_ref){var children=_ref.children;var _useLocalStorage=useLocalStorage(\"isLoggedIn\",{'username':\"\",'password':\"\"}),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),initialValues=_useLocalStorage2[0],setInitialValues=_useLocalStorage2[1];var _useLocalStorage3=useLocalStorage(\"user\",{'id':\"\",'username':\"\",'password':\"\",'name':\"\",'avatar':\"\",'background':\"\",'status':\"\"}),_useLocalStorage4=_slicedToArray(_useLocalStorage3,2),currentUser=_useLocalStorage4[0],setCurrentUser=_useLocalStorage4[1];useEffect(function(){if(!initialValues)return;if(initialValues.username===currentUser.username)return;fetch(\"http://localhost:5555/users/\"+initialValues.username,{method:\"GET\",crossDomain:true,headers:{\"content-type\":\"application/json\",Accept:\"application/json\",\"Access-control-Allow-Origin\":\"*\"}}).then(function(res){return res.json();}).then(function(data){return setCurrentUser(data);}).catch(console.error);},[setCurrentUser,setInitialValues]);console.log(currentUser);console.log(initialValues);return/*#__PURE__*/_jsx(UserContext.Provider,{value:{currentUser:currentUser,setCurrentUser:setCurrentUser,initialValues:initialValues,setInitialValues:setInitialValues},children:currentUser?children:/*#__PURE__*/_jsx(Login,{})});};export default UserContext;","map":{"version":3,"names":["React","useEffect","createContext","Login","useLocalStorage","jsx","_jsx","UserContext","UserProvider","_ref","children","_useLocalStorage","_useLocalStorage2","_slicedToArray","initialValues","setInitialValues","_useLocalStorage3","_useLocalStorage4","currentUser","setCurrentUser","username","fetch","method","crossDomain","headers","Accept","then","res","json","data","catch","console","error","log","Provider","value"],"sources":["/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/UserContext.js"],"sourcesContent":["import React from 'react';\nimport {useEffect, createContext} from \"react\";\nimport Login from './Login';\nimport { useLocalStorage} from './useLocalStorage';\n\n\n\nconst UserContext = createContext();\n\n\n\n\nexport const UserProvider  = ({children}) => {\n\n    const [initialValues, setInitialValues] = useLocalStorage(\"isLoggedIn\", {\n        'username': \"\",\n        'password': \"\"\n    });\n    \n\n    const [currentUser, setCurrentUser ] = useLocalStorage(\"user\", {\n        'id': \"\",\n        'username': \"\",\n        'password': \"\",\n        'name': \"\",\n        'avatar': \"\",\n        'background': \"\",\n        'status': \"\"\n  });\n\n    useEffect(() => {\n     \n\tif (!initialValues) return;\n\tif (initialValues.username === currentUser.username) return;\n\tfetch(`http://localhost:5555/users/`+initialValues.username, {\n        method: \"GET\",\n        crossDomain: true,\n        headers: {\n            \"content-type\": \"application/json\",\n            Accept: \"application/json\",\n            \"Access-control-Allow-Origin\":\"*\",\n        }\n    })\n\t\t\t.then(res=>res.json())\n\t\t\t.then(data =>setCurrentUser(data))\n            .catch(console.error);\n\n\t},[setCurrentUser, setInitialValues]);\n    \n    console.log(currentUser);\n    console.log(initialValues);\n    return (\n        <UserContext.Provider value={{currentUser, setCurrentUser, initialValues, setInitialValues}}>\n           {currentUser? children : <Login />}\n        </UserContext.Provider>\n\n    );\n    };\n\nexport default UserContext;"],"mappings":"kJAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAAQC,SAAS,CAAEC,aAAa,KAAO,OAAO,CAC9C,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,OAASC,eAAe,KAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAInD,GAAM,CAAAC,WAAW,cAAGL,aAAa,CAAC,CAAC,CAKnC,MAAO,IAAM,CAAAM,YAAY,CAAI,QAAhB,CAAAA,YAAYA,CAAAC,IAAA,CAAoB,IAAd,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAEnC,IAAAC,gBAAA,CAA0CP,eAAe,CAAC,YAAY,CAAE,CACpE,UAAU,CAAE,EAAE,CACd,UAAU,CAAE,EAChB,CAAC,CAAC,CAAAQ,iBAAA,CAAAC,cAAA,CAAAF,gBAAA,IAHKG,aAAa,CAAAF,iBAAA,IAAEG,gBAAgB,CAAAH,iBAAA,IAMtC,IAAAI,iBAAA,CAAuCZ,eAAe,CAAC,MAAM,CAAE,CAC3D,IAAI,CAAE,EAAE,CACR,UAAU,CAAE,EAAE,CACd,UAAU,CAAE,EAAE,CACd,MAAM,CAAE,EAAE,CACV,QAAQ,CAAE,EAAE,CACZ,YAAY,CAAE,EAAE,CAChB,QAAQ,CAAE,EAChB,CAAC,CAAC,CAAAa,iBAAA,CAAAJ,cAAA,CAAAG,iBAAA,IAROE,WAAW,CAAAD,iBAAA,IAAEE,cAAc,CAAAF,iBAAA,IAUlChB,SAAS,CAAC,UAAM,CAEnB,GAAI,CAACa,aAAa,CAAE,OACpB,GAAIA,aAAa,CAACM,QAAQ,GAAKF,WAAW,CAACE,QAAQ,CAAE,OACrDC,KAAK,CAAC,+BAA+BP,aAAa,CAACM,QAAQ,CAAE,CACtDE,MAAM,CAAE,KAAK,CACbC,WAAW,CAAE,IAAI,CACjBC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClCC,MAAM,CAAE,kBAAkB,CAC1B,6BAA6B,CAAC,GAClC,CACJ,CAAC,CAAC,CACFC,IAAI,CAAC,SAAAC,GAAG,QAAE,CAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,GAAC,CACrBF,IAAI,CAAC,SAAAG,IAAI,QAAG,CAAAV,cAAc,CAACU,IAAI,CAAC,GAAC,CACxBC,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC,CAEhC,CAAC,CAAC,CAACb,cAAc,CAAEJ,gBAAgB,CAAC,CAAC,CAElCgB,OAAO,CAACE,GAAG,CAACf,WAAW,CAAC,CACxBa,OAAO,CAACE,GAAG,CAACnB,aAAa,CAAC,CAC1B,mBACIR,IAAA,CAACC,WAAW,CAAC2B,QAAQ,EAACC,KAAK,CAAE,CAACjB,WAAW,CAAXA,WAAW,CAAEC,cAAc,CAAdA,cAAc,CAAEL,aAAa,CAAbA,aAAa,CAAEC,gBAAgB,CAAhBA,gBAAgB,CAAE,CAAAL,QAAA,CACxFQ,WAAW,CAAER,QAAQ,cAAGJ,IAAA,CAACH,KAAK,GAAE,CAAC,CACf,CAAC,CAG3B,CAAC,CAEL,cAAe,CAAAI,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}