{"ast":null,"code":"import React,{useEffect}from'react';import{useNavigate}from\"react-router-dom\";import{useFormik}from\"formik\";import*as yup from\"yup\";import UserContext from\"./UserContext\";import{useContext}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var navigate=useNavigate();var _useContext=useContext(UserContext),initialValues=_useContext.initialValues,setInitialValues=_useContext.setInitialValues;// const [logInfo, setLogInfo] = useState();\n// const [logIn, setLogIn] = useState( user? true : false);\n// 8a. create state error\nvar formSchema=yup.object().shape({username:yup.string().required(),password:yup.string().required()});var formik=useFormik({initialValues:initialValues,validationSchema:formSchema,onSubmit:function onSubmit(values,actions){fetch(\"http://localhost:5555/login\",{method:\"POST\",crossDomain:true,headers:{\"content-type\":\"application/json\",Accept:\"application/json\",\"Access-control-Allow-Origin\":\"*\"},body:JSON.stringify(values)}).then(function(res){if(res.ok){actions.resetForm();navigate(\"/contacts\");}else{navigate(\"/signup\");}});}});useEffect(function(){setInitialValues(formik.values);},[setInitialValues,formik.values]);return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:formik.values.username,onChange:formik.handleChange,onBlur:formik.handleBlur}),formik.touched.username&&formik.errors.username?/*#__PURE__*/_jsx(\"h3\",{children:formik.errors.username}):\"\",/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formik.values.password,onChange:formik.handleChange,onBlur:formik.handleBlur}),formik.touched.password&&formik.errors.password?/*#__PURE__*/_jsx(\"h3\",{children:formik.errors.password}):\"\",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]})});}export default Login;","map":{"version":3,"names":["React","useEffect","useNavigate","useFormik","yup","UserContext","useContext","jsx","_jsx","jsxs","_jsxs","Login","navigate","_useContext","initialValues","setInitialValues","formSchema","object","shape","username","string","required","password","formik","validationSchema","onSubmit","values","actions","fetch","method","crossDomain","headers","Accept","body","JSON","stringify","then","res","ok","resetForm","children","className","handleSubmit","type","name","value","onChange","handleChange","onBlur","handleBlur","touched","errors"],"sources":["/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/Login.js"],"sourcesContent":["import React, {useEffect} from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport UserContext from \"./UserContext\";\nimport {useContext} from \"react\";\n\n\n\n\n\n\n\nfunction Login(){\n\n\tconst navigate = useNavigate();\n\tconst {initialValues, setInitialValues} = useContext(UserContext);\n\t// const [logInfo, setLogInfo] = useState();\n\t// const [logIn, setLogIn] = useState( user? true : false);\n\n\n\n\n\n\n\t\n\n    \n\n\t// 8a. create state error\n\n\n\tconst formSchema = yup.object().shape({\n\t\tusername: yup.string().required(),\n\t\tpassword: yup.string().required(),\n\t});\n\tconst formik = useFormik({\n\t\tinitialValues,\n\t\tvalidationSchema: formSchema,\n\t\tonSubmit:(values, actions) => {\n\t\t\tfetch( `http://localhost:5555/login`, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tcrossDomain: true,\n\t\t\t\theaders: {\n\t\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\"Access-control-Allow-Origin\":\"*\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify(values),\n\t\t\t}).then((res) => {\n\t\t\t\tif (res.ok) {\n\t\t\t\t\t\n\t\t\t\t\t\tactions.resetForm();\n\t\t\t\t\t\tnavigate(\"/contacts\");\n\t\t\t\t\t\t\n\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tnavigate(\"/signup\");\n\t\t\t\t} \n\t\t\t});\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tsetInitialValues(formik.values);\n\t  }, [setInitialValues, formik.values]);\n\t\t\n\n\treturn (\n\t\t<section>\n\t\t\t\t<form className=\"form\" onSubmit={formik.handleSubmit}>\n\t\t\t\t\t<label>Username</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\tvalue={formik.values.username}\n\t\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\t\tonBlur={formik.handleBlur}\n\t\t\t\t\t/>\n\t\t\t\t\t{/* formik.touched is enabled with onBlur */}\n\t\t\t\t\t{/* \n\t\t\t\t\t\t1. onBlur events - toggles formik.touched\n\t\t\t\t\t\t2. conditional: if formik.touched and formik.errors \n\t\t\t\t\t*/}\n\t\t\t\t\t{formik.touched.username && formik.errors.username ? (\n\t\t\t\t\t\t<h3>{formik.errors.username}</h3>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t\"\"\n\t\t\t\t\t)}\n\t\t\t\t\t<label>Password</label>\n\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tvalue={formik.values.password}\n\t\t\t\t\t\tonChange={formik.handleChange}\n\t\t\t\t\t\tonBlur={formik.handleBlur}\n\t\t\t\t\t/>\n\t\t\t\t\t{formik.touched.password && formik.errors.password ? (\n\t\t\t\t\t\t<h3>{formik.errors.password}</h3>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t\"\"\n\t\t\t\t\t)}\n\t\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t\t\t{/* 8c. use conditional rendering to display the error to user */}\n\t\t\t\t</form>\n\t\t\t\n\t\t</section>\n\t);\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}