{"ast":null,"code":"import _toConsumableArray from\"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from\"react\";import UserContext from\"./UserContext\";import{HashLink as Link}from\"react-router-hash-link\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function ChatRoom(_ref){var id=_ref.id,handleFormSubmit=_ref.handleFormSubmit,handleOnChange=_ref.handleOnChange,formBody=_ref.formBody,handleOnDelete=_ref.handleOnDelete,isEditing=_ref.isEditing,handleOnClickButton=_ref.handleOnClickButton;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),chatsRoom=_useState2[0],setChatsRoom=_useState2[1];useEffect(function(){fetch(\"http://localhost:5555/messages/conversations/\".concat(parseInt(id))).then(function(res){return res.json();}).then(function(data){if(chatsRoom!==data){setChatsRoom(data);}});},[id,chatsRoom]);// console.log(formBody);\nvar chatName=id&&chatsRoom&&_toConsumableArray(chatsRoom).map(function(el){return el.conversation.conversation_name;})[0];var _useContext=useContext(UserContext),currentUser=_useContext.currentUser;var roomChats=chatsRoom&&chatsRoom.map(function(chat){return/*#__PURE__*/_jsxs(\"div\",{id:parseInt(chat.id),style:{width:500,flex:1,backgroundColor:'black'},children:[/*#__PURE__*/_jsxs(\"h4\",{style:{display:'flex',alignItems:'center',justifyContent:'center',color:\"white\"},children:[chat.created_at,\"  \",chat.user.name]}),/*#__PURE__*/_jsx(\"img\",{src:chat.user.avatar,alt:chat.user.name,width:30}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:20,color:\"white\"},children:chat.content_data}),/*#__PURE__*/_jsxs(\"div\",{style:{alignContent:\"flex-end\"},children:[currentUser.id===chat.user_id?/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"edit\",chat:chat,onClick:function onClick(){return handleOnClickButton(chat);},children:/*#__PURE__*/_jsx(Link,{to:\"#editForm\",smooth:true,children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"edit\",children:isEditing?\"stopEdit\":\"edit\"})})}):null,/*#__PURE__*/_jsx(\"button\",{chat:chat,onClick:function onClick(){return handleOnDelete(chat);},children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"delete\",children:\"\\uD83D\\uDDD1\"})})]})]},chat.id);});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{style:{display:'flex',alignItems:'center',justifyContent:'center'},children:[\"Conversation name is \",chatName]}),/*#__PURE__*/_jsx(\"section\",{style:{display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"ul\",{children:roomChats})}),/*#__PURE__*/_jsx(\"section\",{styles:{display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"form\",{className:\"new-message\",id:\"editForm\",onSubmit:function onSubmit(e){return handleFormSubmit(e);},style:{display:'flex',alignItems:'center',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",name:\"content_data\",autoComplete:\"off\",value:formBody.content_data,onChange:function onChange(e){return handleOnChange(e);},styles:{width:550}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"send\"})]})})]});};export default ChatRoom;","map":{"version":3,"names":["useContext","useEffect","useState","UserContext","HashLink","Link","jsxs","_jsxs","jsx","_jsx","ChatRoom","_ref","id","handleFormSubmit","handleOnChange","formBody","handleOnDelete","isEditing","handleOnClickButton","_useState","_useState2","_slicedToArray","chatsRoom","setChatsRoom","fetch","concat","parseInt","then","res","json","data","chatName","_toConsumableArray","map","el","conversation","conversation_name","_useContext","currentUser","roomChats","chat","style","width","flex","backgroundColor","children","display","alignItems","justifyContent","color","created_at","user","name","src","avatar","alt","fontSize","content_data","alignContent","user_id","type","className","onClick","to","smooth","role","styles","onSubmit","e","autoComplete","value","onChange"],"sources":["/Users/yemiarimoro/Development/code/Chat-app/Chat-app/client/src/Components/ChatRoom.js"],"sourcesContent":["\nimport {  useContext, useEffect, useState } from \"react\";\nimport UserContext from \"./UserContext\";\n\n\n\nimport{HashLink as Link} from \"react-router-hash-link\";\n\n\nfunction ChatRoom({id, handleFormSubmit, handleOnChange, formBody, handleOnDelete, isEditing, handleOnClickButton}){\n\n    const [chatsRoom, setChatsRoom] = useState([])\n\n    useEffect(() =>{\n\t\tfetch(`http://localhost:5555/messages/conversations/${parseInt(id)}`)\n\t\t.then((res) => res.json())\n\t\t.then((data) =>{\n            if(chatsRoom !== data){setChatsRoom(data)}});\n\t},[id, chatsRoom]);\n \n    // console.log(formBody);\n    const chatName = id && chatsRoom && [...chatsRoom].map((el)=>el.conversation.conversation_name)[0];\n    const {currentUser} = useContext(UserContext)\n\n    const roomChats = chatsRoom && chatsRoom.map((chat)=> {\n        return(  \n       \n              <div key= {chat.id} id={parseInt(chat.id)}   style={{\n                width: 500,\n                flex:1,\n                backgroundColor: 'black',\n              }}>\n                <h4 style={{display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center', color:\"white\"}}>{chat.created_at}  {chat.user.name}</h4>\n                <img src={chat.user.avatar} alt={chat.user.name} width={30} />\n                <p style={{fontSize: 20, color:\"white\"}}>{chat.content_data}</p>\n                <div style={{alignContent:\"flex-end\"}}>\n                {currentUser.id === chat.user_id?\n                <button type=\"button\" className=\"edit\" chat={chat} onClick={()=>handleOnClickButton(chat)} >\n                <Link  to=\"#editForm\" smooth  >\n                <span role=\"img\" aria-label=\"edit\">\n                    {isEditing ? \"stopEdit\" : \"edit\"}\n                </span>\n                </Link>\n                </button> \n                : null}\n              \n                <button chat={chat} onClick={() =>handleOnDelete(chat)} >\n                    <span role=\"img\" aria-label=\"delete\">\n                    ðŸ—‘\n                    </span>\n                </button >\n                </div>\n                \n                </div>\n      \n               \n        )})\n      \n\n\n    return (\n        <div >\n       <h2 style={{display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center', }}>Conversation name is {chatName}</h2>\n        <section style={{display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',}}>\n        \n        <ul>{roomChats}</ul>\n           \n      \n        </section>\n        <section styles={{ display:'flex', alignItems: 'center',\n            justifyContent: 'center', }}>\n        <form className=\"new-message\" id=\"editForm\" onSubmit={(e)=>handleFormSubmit(e)}   style={{display:'flex',\n            alignItems: 'center', \n            justifyContent: 'center', \n       \n           }}>\n        <textarea \n            type=\"text\"\n            name=\"content_data\"\n            autoComplete=\"off\"\n            value={formBody.content_data}\n            onChange={(e) => handleOnChange(e)} styles={{width: 550}} />\n        <button type=\"submit\">send</button>\n        </form>\n        </section>\n        </div>\n    )\n};\n\nexport default ChatRoom;"],"mappings":"4SACA,OAAUA,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACxD,MAAO,CAAAC,WAAW,KAAM,eAAe,CAIvC,OAAOC,QAAQ,GAAI,CAAAC,IAAI,KAAO,wBAAwB,CAAC,OAAAC,IAAA,IAAAC,KAAA,gCAAAC,GAAA,IAAAC,IAAA,yBAGvD,QAAS,CAAAC,QAAQA,CAAAC,IAAA,CAAkG,IAAhG,CAAAC,EAAE,CAAAD,IAAA,CAAFC,EAAE,CAAEC,gBAAgB,CAAAF,IAAA,CAAhBE,gBAAgB,CAAEC,cAAc,CAAAH,IAAA,CAAdG,cAAc,CAAEC,QAAQ,CAAAJ,IAAA,CAARI,QAAQ,CAAEC,cAAc,CAAAL,IAAA,CAAdK,cAAc,CAAEC,SAAS,CAAAN,IAAA,CAATM,SAAS,CAAEC,mBAAmB,CAAAP,IAAA,CAAnBO,mBAAmB,CAE7G,IAAAC,SAAA,CAAkCjB,QAAQ,CAAC,EAAE,CAAC,CAAAkB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAvCG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAE9BnB,SAAS,CAAC,UAAK,CACjBuB,KAAK,iDAAAC,MAAA,CAAiDC,QAAQ,CAACd,EAAE,CAAC,CAAE,CAAC,CACpEe,IAAI,CAAC,SAACC,GAAG,QAAK,CAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,GAAC,CACzBF,IAAI,CAAC,SAACG,IAAI,CAAI,CACL,GAAGR,SAAS,GAAKQ,IAAI,CAAC,CAACP,YAAY,CAACO,IAAI,CAAC,EAAC,CAAC,CAAC,CACvD,CAAC,CAAC,CAAClB,EAAE,CAAEU,SAAS,CAAC,CAAC,CAEf;AACA,GAAM,CAAAS,QAAQ,CAAGnB,EAAE,EAAIU,SAAS,EAAIU,kBAAA,CAAIV,SAAS,EAAEW,GAAG,CAAC,SAACC,EAAE,QAAG,CAAAA,EAAE,CAACC,YAAY,CAACC,iBAAiB,GAAC,CAAC,CAAC,CAAC,CAClG,IAAAC,WAAA,CAAsBrC,UAAU,CAACG,WAAW,CAAC,CAAtCmC,WAAW,CAAAD,WAAA,CAAXC,WAAW,CAElB,GAAM,CAAAC,SAAS,CAAGjB,SAAS,EAAIA,SAAS,CAACW,GAAG,CAAC,SAACO,IAAI,CAAI,CAClD,mBAEMjC,KAAA,QAAoBK,EAAE,CAAEc,QAAQ,CAACc,IAAI,CAAC5B,EAAE,CAAE,CAAG6B,KAAK,CAAE,CAClDC,KAAK,CAAE,GAAG,CACVC,IAAI,CAAC,CAAC,CACNC,eAAe,CAAE,OACnB,CAAE,CAAAC,QAAA,eACAtC,KAAA,OAAIkC,KAAK,CAAE,CAACK,OAAO,CAAE,MAAM,CACnCC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAAQ,CAAEC,KAAK,CAAC,OAAO,CAAE,CAAAJ,QAAA,EAAEL,IAAI,CAACU,UAAU,CAAC,IAAE,CAACV,IAAI,CAACW,IAAI,CAACC,IAAI,EAAK,CAAC,cAC1E3C,IAAA,QAAK4C,GAAG,CAAEb,IAAI,CAACW,IAAI,CAACG,MAAO,CAACC,GAAG,CAAEf,IAAI,CAACW,IAAI,CAACC,IAAK,CAACV,KAAK,CAAE,EAAG,CAAE,CAAC,cAC9DjC,IAAA,MAAGgC,KAAK,CAAE,CAACe,QAAQ,CAAE,EAAE,CAAEP,KAAK,CAAC,OAAO,CAAE,CAAAJ,QAAA,CAAEL,IAAI,CAACiB,YAAY,CAAI,CAAC,cAChElD,KAAA,QAAKkC,KAAK,CAAE,CAACiB,YAAY,CAAC,UAAU,CAAE,CAAAb,QAAA,EACrCP,WAAW,CAAC1B,EAAE,GAAK4B,IAAI,CAACmB,OAAO,cAChClD,IAAA,WAAQmD,IAAI,CAAC,QAAQ,CAACC,SAAS,CAAC,MAAM,CAACrB,IAAI,CAAEA,IAAK,CAACsB,OAAO,CAAE,SAAAA,QAAA,QAAI,CAAA5C,mBAAmB,CAACsB,IAAI,CAAC,EAAC,CAAAK,QAAA,cAC1FpC,IAAA,CAACJ,IAAI,EAAE0D,EAAE,CAAC,WAAW,CAACC,MAAM,MAAAnB,QAAA,cAC5BpC,IAAA,SAAMwD,IAAI,CAAC,KAAK,CAAC,aAAW,MAAM,CAAApB,QAAA,CAC7B5B,SAAS,CAAG,UAAU,CAAG,MAAM,CAC9B,CAAC,CACD,CAAC,CACC,CAAC,CACP,IAAI,cAENR,IAAA,WAAQ+B,IAAI,CAAEA,IAAK,CAACsB,OAAO,CAAE,SAAAA,QAAA,QAAK,CAAA9C,cAAc,CAACwB,IAAI,CAAC,EAAC,CAAAK,QAAA,cACnDpC,IAAA,SAAMwD,IAAI,CAAC,KAAK,CAAC,aAAW,QAAQ,CAAApB,QAAA,CAAC,cAErC,CAAM,CAAC,CACF,CAAC,EACL,CAAC,GA1BGL,IAAI,CAAC5B,EA4BT,CAAC,CAGb,CAAC,CAAC,CAIP,mBACIL,KAAA,QAAAsC,QAAA,eACDtC,KAAA,OAAIkC,KAAK,CAAE,CAACK,OAAO,CAAE,MAAM,CAC1BC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAAU,CAAE,CAAAH,QAAA,EAAC,uBAAqB,CAACd,QAAQ,EAAK,CAAC,cACjEtB,IAAA,YAASgC,KAAK,CAAE,CAACK,OAAO,CAAE,MAAM,CAChCC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAAS,CAAE,CAAAH,QAAA,cAE3BpC,IAAA,OAAAoC,QAAA,CAAKN,SAAS,CAAK,CAAC,CAGX,CAAC,cACV9B,IAAA,YAASyD,MAAM,CAAE,CAAEpB,OAAO,CAAC,MAAM,CAAEC,UAAU,CAAE,QAAQ,CACnDC,cAAc,CAAE,QAAU,CAAE,CAAAH,QAAA,cAChCtC,KAAA,SAAMsD,SAAS,CAAC,aAAa,CAACjD,EAAE,CAAC,UAAU,CAACuD,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAG,CAAAvD,gBAAgB,CAACuD,CAAC,CAAC,EAAC,CAAG3B,KAAK,CAAE,CAACK,OAAO,CAAC,MAAM,CACpGC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAEjB,CAAE,CAAAH,QAAA,eACLpC,IAAA,aACImD,IAAI,CAAC,MAAM,CACXR,IAAI,CAAC,cAAc,CACnBiB,YAAY,CAAC,KAAK,CAClBC,KAAK,CAAEvD,QAAQ,CAAC0C,YAAa,CAC7Bc,QAAQ,CAAE,SAAAA,SAACH,CAAC,QAAK,CAAAtD,cAAc,CAACsD,CAAC,CAAC,EAAC,CAACF,MAAM,CAAE,CAACxB,KAAK,CAAE,GAAG,CAAE,CAAE,CAAC,cAChEjC,IAAA,WAAQmD,IAAI,CAAC,QAAQ,CAAAf,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC7B,CAAC,CACE,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAnC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}